<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å¤§æ¹¾åŒºNOâ‚‚æµ“åº¦é¢„æµ‹</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans SC', 'Microsoft YaHei', sans-serif;
            background: url('https://images.pexels.com/photos/33127971/pexels-photo-33127971.jpeg') no-repeat center center;
            background-size: cover; /* å…¨å±èƒŒæ™¯å›¾ */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #fff;
            padding: 20px;
            overflow-x: hidden;
        }

        /* ä¸»é¢˜æ ‡é¢˜æ ·å¼ - æ•´åˆindex(4).htmlçš„è®¾è®¡ */
        .theme-title {
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            border: 1px solid rgba(0, 243, 255, 0.3);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2);
        }

        .theme-title h1 {
            font-size: 3.2rem;
            font-weight: 700;
            letter-spacing: 2px;
            text-shadow: 0 0 15px rgba(0, 243, 255, 0.7);
            margin-bottom: 10px;
            color: #fff;
            background: linear-gradient(to right, #00f3ff, #00ffaa);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .theme-title p {
            font-size: 1.2rem;
            color: #a7e8ff;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* ä¸»å¡ç‰‡å®¹å™¨ */
        .card {
            position: relative;
            max-width: 1100px;
            width: 100%;
            height: 620px;
            border-radius: 25px;
            background: rgba(20, 25, 50, 0.7);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            display: flex;
            overflow: hidden;
            border: 1px solid rgba(0, 243, 255, 0.3);
        }

        /* å·¦ä¾§åŒºåŸŸæ ·å¼ - æ•´åˆindex(4).htmlçš„è®¾è®¡ */
        .card-left {
            width: 45%;
            height: 100%;
            background: url('https://images.pexels.com/photos/33127971/pexels-photo-33127971.jpeg') no-repeat center center;
            background-size: cover;
            padding: 30px;
            display: flex;
            flex-direction: column;
            border-right: 1px solid rgba(0, 243, 255, 0.2);
            position: relative;
            z-index: 2;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);
            overflow: hidden;
        }

        /* æ·±è‰²è¦†ç›–å±‚å¢å¼ºæ–‡å­—å¯è¯»æ€§ */
        .card-left::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 20, 40, 0.25);
            z-index: -1;
        }

        .city-header {
            margin-bottom: 30px;
            text-align: center;
            z-index: 2;
        }

        .city-header h2 {
            font-size: 2.4rem;
            font-weight: 500;
            color: #fff;
            text-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
        }

        /* æ—¶é’Ÿæ ·å¼  */
        .realtime-clock {
            text-align: left;
            margin: 10px 0 15px;
            padding: 8px 12px;;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 15px;
            border: 1px solid rgba(0, 243, 255, 0.2);
            z-index: 2;
        }
        /* æ–°å¢ï¼šæ—¶é’Ÿå†…å®¹æ¨ªå‘æ’åˆ—å®¹å™¨ */
        .clock-content {
            display: flex;
            align-items: center;
            gap: 10px; /* å…ƒç´ é—´é—´è· */
        }

        .realtime-clock .date {
            font-size: 1.4rem;
            font-weight: 300;
            color: #a7e8ff;
            margin-bottom: 0;
        }

        .realtime-clock .weekday {
            font-size: 1.4rem;
            font-weight: 300;
            color: #a7e8ff;
            margin-bottom: 0;
        }

        .realtime-clock .time {
            font-size: 1.4rem;
            font-weight: 400;
            color: #00f3ff;
            text-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
            font-family: 'Orbitron', sans-serif;
        }
        /* æ–°å¢ï¼šåˆ†éš”ç¬¦æ ·å¼ */
        .separator {
            color: #a7e8ff;
            opacity: 0.7;
        }
        /* å“åº”å¼é€‚é…ï¼šå°å±è¿›ä¸€æ­¥å‹ç¼© */
        @media (max-width: 600px) {
            .clock-content {
                gap: 5px; /* å°å±ç¼©å°é—´è· */
            }
            .realtime-clock .date,
            .realtime-clock .weekday {
                font-size: 1.1rem;
            }
            .realtime-clock .time {
                font-size: 1.4rem;
            }
        }
        /*ä»ªè¡¨ç›˜åŠå›¾ä¾‹ç›¸å…³æ ·å¼*/
        /* å½“å‰å€¼æ˜¾ç¤º */
         .gauge-container {
            width: 100%;
            max-width: 320px;
            height: 250px;
            position: relative;
            flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */
        }

        .current-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #00f3ff;
            text-align: center;
            margin: 10px 0;
            text-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        /* è´¨é‡çŠ¶æ€ */
        .quality-status {
            font-size: 1.5rem;
            color: #a7e8ff;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
       
        /* ç©ºæ°”è´¨é‡æ•°æ® */
        .air-quality {
            background: rgba(0, 0, 0, 0.25);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(0, 243, 255, 0.2);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            z-index: 2;
        }


        .aqi-value {
            font-size: 4.5rem;
            font-weight: 700;
            color: #00ffaa;
            text-align: center;
            margin: 15px 0;
            text-shadow: 0 0 15px rgba(0, 255, 170, 0.4);
        }

        .aqi-status {
            font-size: 1.8rem;
            text-align: center;
            color: #00ffaa;
            margin-bottom: 25px;
        }
/* å®æ—¶ç›‘æµ‹è¯¦æƒ…æ¿å—æ ·å¼ */
.pollution-details {
    margin-top: 1px; /* ä¸ä¸Šæ–¹è¡¨ç›˜ä¿æŒé—´è· */
    padding: 15px;
    background: rgba(0, 10, 30, 0.6); /* æ·±è‰²åŠé€æ˜èƒŒæ™¯ï¼Œä¸é¡µé¢å…¶ä»–ä¿¡æ¯æ¡†ä¸€è‡´ */
    border-radius: 12px; /* åœ†è§’ä¸å…¶ä»–å®¹å™¨ç»Ÿä¸€ */
    border: 1px solid rgba(0, 243, 255, 0.2); /* é’è‰²è¾¹æ¡†ï¼ŒåŒ¹é…ä¸»é¢˜ */
}

.pollution-details h3 {
    font-size: 1.2rem;
    color: #00f3ff; /* é’è‰²æ ‡é¢˜ï¼Œä¸é¡µé¢å…¶ä»–æ ‡é¢˜ä¸€è‡´ */
    margin-bottom: 10px;
    text-shadow: 0 0 5px rgba(0, 243, 255, 0.3); /* è½»å¾®å‘å…‰æ•ˆæœ */
}

.pollution-details p {
    font-size: 1rem;
    color: #c7f2ff; /* æµ…é’è‰²æ–‡å­—ï¼Œä¿è¯å¯è¯»æ€§ */
    line-height: 1.6;
    margin-bottom: 8px;
}

/* å“åº”å¼é€‚é…ï¼šå°å±å¹•ä¸‹è°ƒæ•´é—´è·å’Œå­—ä½“ */
@media (max-width: 600px) {
    .pollution-details {
        padding: 12px;
        margin-top: 15px;
    }
    .pollution-details h3 {
        font-size: 1.1rem;
    }
    .pollution-details p {
        font-size: 0.9rem;
    }
}

        .pollution-info {
            background: rgba(0, 10, 30, 0.6);
            border-radius: 12px;
            padding: 15px;
            margin-top: 10px; /* è°ƒæ•´æ•´ä½“ä½ç½® */
            position: relative;
            z-index: 3;
        }

        .pollution-info h3 {
            font-size: 1.3rem;
            color: #00f3ff;
            margin-bottom: 15px;
            text-align: left; /* å·¦å¯¹é½æ ‡é¢˜ */
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
        }

        .pollution-info p {
            font-size: 1rem;
            line-height: 1.6;
            color: #c7f2ff;
            margin-bottom: 12px; /* è°ƒæ•´æ®µè½é—´è· */
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.6);
            text-align: justify; /* ä¸¤ç«¯å¯¹é½æ–‡æœ¬ */
        }

        /* è¶‹åŠ¿æŒ‡ç¤ºç¬¦å·æ ·å¼ */
        .trend-up {
            color: #ff6b6b;
            font-size: 1.5rem;
            margin-left: 10px;
        }
        
        .trend-down {
            color: #4ecdc4;
            font-size: 1.5rem;
            margin-left: 10px;
        }
        
        .trend-equal {
    color: #f0f0f0;
    font-size: 1.5rem;
    margin-left: 10px;
}

        /* å³ä¾§åŒºåŸŸæ ·å¼ */
        .card-right {
            width: 60%;
            height: 100%;
            padding: 30px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* æœç´¢åŒºåŸŸæ ·å¼ */
        .search-container {
            margin-bottom: 25px;
            z-index: 10;
        }

        .search-bar {
            display: flex;
            gap: 12px;
            position: relative;
        }

        #cityInput {
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            outline: none;
            font-size: 1.1rem;
            width: 100%;
            background: rgba(10, 20, 40, 0.7);
            color: #fff;
            border: 1px solid rgba(0, 243, 255, 0.3);
        }

        #cityInput::placeholder {
            color: #7f9fb6;
        }

        #searchBtn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #00a8cc, #007bff);
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        #searchBtn:hover {
            background: linear-gradient(135deg, #0097b2, #0062cc);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 123, 255, 0.4);
        }

        .city-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            max-height: 250px;
            overflow-y: auto;
            background: rgba(15, 25, 50, 0.95);
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            z-index: 100;
            display: none;
            border: 1px solid rgba(0, 243, 255, 0.3);
            margin-top: 8px;
        }

        .city-dropdown.active {
            display: block;
        }

        .city-item {
            padding: 14px 20px;
            cursor: pointer;
            transition: all 0.2s;
            color: #cce6ff;
            border-bottom: 1px solid rgba(100, 150, 200, 0.2);
        }

        .city-item:last-child {
            border-bottom: none;
        }

        .city-item:hover {
            background: rgba(0, 123, 255, 0.2);
            color: #00f3ff;
        }
        
        /* çƒ­åŠ›å›¾åŒºåŸŸ */
        .heatmap-container {
            flex-grow: 1;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(0, 243, 255, 0.2);
            overflow: hidden;
            position: relative;
        }

        .heatmap-title {
            text-align: center;
            margin-bottom: 15px;
            color: #00f3ff;
            font-size: 1.4rem;
            font-weight: 500;
        }

        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 15px;
            height: 100%;
        }

        .city-cell {
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: 500;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .city-cell:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            z-index: 2;
        }

        .city-name {
            font-size: 1.2rem;
            margin-bottom: 8px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
            padding: 5px 10px;
            border-radius: 5px;
        }

        .city-value {
            font-size: 1.4rem;
            font-weight: 700;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
            padding: 5px 10px;
            border-radius: 5px;
            display: flex;
            align-items: center;
        }

        .city-level {
            padding: 5px 10px;
            border-radius: 5px;
        }

        /* åº•éƒ¨ä¿¡æ¯ */
        .footer {
            margin-top: 30px;
            text-align: center;
            color: #7f9fb6;
            font-size: 0.9rem;
            width: 100%;
            padding: 15px;
        }

        /* é¡¹ç›®ä¿¡æ¯åŒºåŸŸ */
        .project-info {
            margin-top: 40px;
            width: 100vw;
            margin-left: calc(50% - 50vw);
            background: rgb(41, 55, 83);
            padding: 0;
            border: none;
            box-shadow: none;
        }

        .project-info-header {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            padding: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .project-info-header:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .project-info h3 {
            color: #00f3ff;
            font-size: 1.4rem;
            margin: 0;
            text-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
        }

        .toggle-arrow {
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid #00f3ff;
            transition: transform 0.3s ease;
        }

        .toggle-arrow.expanded {
            transform: rotate(180deg);
        }

        .project-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
            padding: 0 40px;
        }

        .project-content.expanded {
            max-height: 2000px;
            padding: 20px 40px 40px;
        }

        .info-grid {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-bottom: 20px;
        }

        .info-section {
            background: rgba(0, 10, 30, 0.6);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(0, 243, 255, 0.1);
        }

        .info-section h4 {
            color: #00ffaa;
            font-size: 1.1rem;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(0, 255, 170, 0.3);
            padding-bottom: 8px;
        }

        .info-section p, .info-section li {
            color: #c7f2ff;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .info-section ul {
            list-style: none;
            padding-left: 0;
        }

        .info-section li::before {
            content: "â€¢";
            color: #00f3ff;
            margin-right: 8px;
        }

        .info-section a {
            color: #00f3ff;
            text-decoration: none;
            transition: color 0.3s;
        }

        .info-section a:hover {
            color: #00ffaa;
            text-shadow: 0 0 5px rgba(0, 255, 170, 0.5);
        }

        /* å‚è€ƒæ–‡çŒ®æ ·å¼ */
        .reference-item {
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(0, 20, 40, 0.4);
            border-radius: 8px;
            border-left: 3px solid rgba(0, 243, 255, 0.5);
        }

        .reference-item a {
            display: block;
            font-weight: 500;
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .reference-item .authors {
            color: #a7e8ff;
            font-size: 0.85rem;
            font-style: italic;
            display: block;
        }

        .project-footer {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 243, 255, 0.2);
            color: #7f9fb6;
            font-size: 0.9rem;
        }

        .github-link {
            color: #c7f2ff;
            text-decoration: none;
            transition: all 0.3s;
        }

        .github-link:hover {
            color: #00f3ff;
            transform: scale(1.1);
        }

        .github-icon {
            width: 28px;
            height: 28px;
            fill: currentColor;
        }

        @media (max-width: 768px) {
            .project-content.expanded {
                padding: 20px 20px 40px;
            }
            
            .project-footer {
                flex-direction: column;
                gap: 15px;
            }
            
            .info-section {
                padding: 15px;
            }
            
            .reference-item {
                padding: 10px;
            }
        }

        /* è£…é¥°å…ƒç´  */
        .decoration {
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0, 243, 255, 0.15) 0%, rgba(0, 243, 255, 0) 70%);
            z-index: 0;
        }

        .decoration.top-right {
            top: -150px;
            right: -150px;
            width: 400px;
            height: 400px;
        }

        .decoration.bottom-left {
            bottom: -100px;
            left: -100px;
            width: 300px;
            height: 300px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 900px) {
            .card {
                flex-direction: column;
                height: auto;
                max-height: none;
            }
            
            .card-left, .card-right {
                width: 100%;
            }
            
            .card-left {
                height: 400px;
            }
            
            .heatmap-grid {
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: repeat(4, 1fr);
            }
        }

        @media (max-width: 600px) {
            .theme-title h1 {
                font-size: 2.5rem;
            }
            
            .heatmap-grid {
                grid-template-columns: repeat(2, 1fr);
                grid-template-rows: repeat(6, 1fr);
            }
            
            .city-cell {
                padding: 15px 5px;
            }
            
            .city-name {
                font-size: 1rem;
            }
            
            .city-value {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <!-- ä¸»é¢˜æ ‡é¢˜ - å¢å¼ºè®¾è®¡ -->
    <div class="theme-title">
        <h1>ç²¤æ¸¯æ¾³å¤§æ¹¾åŒºNOâ‚‚æµ“åº¦é¢„æµ‹</h1>
        <p>å®æ—¶ç›‘æµ‹ä¸é¢„æµ‹ç²¤æ¸¯æ¾³å¤§æ¹¾åŒºä¸»è¦åŸå¸‚çš„äºŒæ°§åŒ–æ°®æµ“åº¦ï¼ŒåŠ©åŠ›ç¯å¢ƒæ²»ç†ä¸å…¬ä¼—å¥åº·</p>
    </div>
    
    <!-- ä¸»å¡ç‰‡å®¹å™¨ -->
    <div class="card">
        <!-- è£…é¥°å…ƒç´  -->
        <div class="decoration top-right"></div>
        <div class="decoration bottom-left"></div>
        
        <!-- å·¦ä¾§ -->
        <div class="card-left">
            <div class="city-header">
                <h2>å¹¿å·å¸‚</h2>
            </div>
            
            <!-- æ—¶é’ŸHTML -->
            <div class="realtime-clock">
                <div class="clock-content"> <!-- æ–°å¢ï¼šæ¨ªå‘å®¹å™¨ -->
                    <div class="date" id="dateDisplay">2025/07/28</div>
                    <span class="separator">|</span> <!-- æ–°å¢ï¼šåˆ†éš”ç¬¦ -->
                    <div class="weekday" id="weekdayDisplay">æ˜ŸæœŸä¸€</div>
                    <span class="separator">|</span> <!-- æ–°å¢ï¼šåˆ†éš”ç¬¦ -->
                    <div class="time" id="timeDisplay">14:28:36</div>
                </div>
            </div>


            <div class="air-quality">
                <!-- ä¿®æ”¹ç‚¹1ï¼šå°†ä»ªè¡¨ç›˜å’Œå›¾ä¾‹æ”¾åœ¨åŒä¸€ä¸ªflexå®¹å™¨ä¸­ï¼Œå®ç°å·¦å³å¸ƒå±€ -->
                <div style="display: flex; align-items: center; gap: 15px;">
                    
                    <!-- ä¿®æ”¹ç‚¹2ï¼šå›¾ä¾‹æ”¾åœ¨è¡¨ç›˜å·¦ä¾§ï¼Œå‚ç›´æ’åˆ— -->
                    <div style="display: flex; flex-direction: column; gap: 0;">
                        <span style="background: rgba(50, 200, 100, 0.8); padding: 4px 8px; color: #fff; font-size: 0.8rem;">ä¼˜</span>
                        <span style="background: rgba(255, 255, 100, 0.8); padding: 4px 8px; color: #fff; font-size: 0.8rem;">è‰¯</span>
                        <span style="background: rgba(255, 150, 50, 0.8); padding: 8px 4px; color: #fff; writing-mode: vertical-rl; text-orientation: upright; font-size: 0.8rem;">è½»åº¦æ±¡æŸ“</span>
                        <span style="background: rgba(255, 100, 100, 0.8); padding: 8px 4px; color: #fff; writing-mode: vertical-rl; text-orientation: upright; font-size: 0.8rem;">ä¸­åº¦æ±¡æŸ“</span>
                    </div>

                    <!-- ä»ªè¡¨ç›˜å®¹å™¨ -->
                    <div class="gauge-container">
                        <div id="gaugeChart" style="width: 100%; height: 100%;"></div>
                    </div>
                </div>
                <!-- å®æ—¶ç›‘æµ‹è¯¦æƒ…æ¿å— -->
                 <div class="pollution-details">
                    <h3>å®æ—¶ç›‘æµ‹è¯¦æƒ…</h3>
                    <p>NOâ‚‚æµ“åº¦è¶‹åŠ¿ï¼š</p>
                    <p>å¥åº·å»ºè®®ï¼šé€‚å®œæˆ·å¤–æ´»åŠ¨ï¼Œæ•æ„Ÿäººç¾¤æ— å½±å“</p>
                 </div>


            </div>           
        </div>
        
        <!-- å³ä¾§ï¼šæœç´¢ä¸çƒ­åŠ›å›¾ -->
        <div class="card-right">
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" id="cityInput" placeholder="è¾“å…¥å¤§æ¹¾åŒºåŸå¸‚åç§°ï¼ˆå¦‚ï¼šå¹¿å·ã€æ·±åœ³ï¼‰">
                    <button id="searchBtn">æŸ¥è¯¢æµ“åº¦æ•°æ®</button>
                    <div class="city-dropdown" id="cityDropdown"></div>
                </div>
            </div>
            
            <div class="heatmap-container">
                <div class="heatmap-title">å¤§æ¹¾åŒºå„åŸå¸‚å®æ—¶NOâ‚‚æµ“åº¦ (Î¼g/mÂ³)</div>
                <div class="heatmap-grid" id="heatmapGrid">
                    <!-- çƒ­åŠ›å›¾å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <!-- é¡¹ç›®ä¿¡æ¯åŒºåŸŸ -->
    <div class="project-info">
        <div class="project-info-header" onclick="toggleProjectInfo()">
            <h3>é¡¹ç›®ä¿¡æ¯ä¸æŠ€æœ¯æ”¯æŒ</h3>
            <div class="toggle-arrow" id="toggleArrow"></div>
        </div>
        
        <div class="project-content" id="projectContent">
            <div class="info-grid">
                <div class="info-section">
                    <h4>ğŸ“š å‚è€ƒæ–‡çŒ®</h4>
                    <div class="reference-item">
                        <a href="https://doi.org/10.48550/arXiv.2210.10161" target="_blank">
                            Nonparametric Quantile Regression: Non-Crossing Constraints and Conformal Prediction
                        </a>
                        <span class="authors">Wenlu Tang, Guohao Shen, Yuanyuan Lin, Jian Huang</span>
                    </div>
                    <div class="reference-item">
                        <a href="https://doi.org/10.48550/arXiv.1903.04684" target="_blank">
                            The limits of distribution-free conditional predictive inference
                        </a>
                        <span class="authors">Rina Foygel Barber, Emmanuel J. CandÃ¨s, Aaditya Ramdas, Ryan J. Tibshirani</span>
                    </div>
                    <div class="reference-item">
                        <a href="https://doi.org/10.48550/arXiv.1905.10634" target="_blank">
                            Adaptive, Distribution-Free Prediction Intervals for Deep Networks
                        </a>
                        <span class="authors">Danijel Kivaranovic, Kory D. Johnson, Hannes Leeb</span>
                    </div>
                    <div class="reference-item">
                        <a href="https://doi.org/10.1016/j.jenvman.2024.121198" target="_blank">
                            Geospatial artificial intelligence for estimating daytime and nighttime nitrogen dioxide concentration variations in Taiwan: A spatial prediction model
                        </a>
                        <span class="authors">Jennieveive Babaan, Pei-Yi Wong, Pau-Chung Chen, Hsiu-Ling Chen, Shih-Chun Candice Lung, Yu-Cheng Chen, Chih-Da Wu</span>
                    </div>
                    <div class="reference-item">
                        <a href="https://doi.org/10.1371/journal.pone.0269295" target="_blank">
                            Bidirectional convolutional LSTM for the prediction of nitrogen dioxide in the city of Madrid
                        </a>
                        <span class="authors">Ditsuhi Iskandaryan, Francisco Ramos, Sergio Trilles</span>
                    </div>
                    <div class="reference-item">
                        <a href="https://link.cnki.net/doi/10.19316/j.issn.1002-6002.2021.01.16" target="_blank">
                            åŸºäºä¿¡å·æ”¹è¿›æ·±åº¦å­¦ä¹ ç½‘ç»œçš„äº¬æ´¥å†€åŸå¸‚ç¾¤äºŒæ°§åŒ–æ°®æµ“åº¦é¢„æµ‹
                        </a>
                        <span class="authors">å®«åŒä¼Ÿ, å¼ æ´‹, åˆ˜ç‚³æ˜¥</span>
                    </div>
                    <div class="reference-item">
                        <a href="https://link.cnki.net/urlid/34.1298.o4.20240828.1649.002" target="_blank">
                            åŸºäºéšæœºæ£®æ—çš„O3å’ŒNO2è¿‘åœ°é¢è´¨é‡æµ“åº¦é¢„æµ‹ç ”ç©¶
                        </a>
                        <span class="authors">é­å‹¤è°¨, è°¢å“å, Junaid KHAYYAM, èƒ¡å³°</span>
                    </div>
                </div>
            </div>
            
            <div class="project-footer">
                <a href="https://github.com/Scream9371/no2-prediction-system" target="_blank" class="github-link">
                    <svg class="github-icon" viewBox="0 0 24 24">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.30.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
                <div>
                    <p>åŸºäºæœºå™¨å­¦ä¹ çš„å¤§æ¹¾åŒº NOâ‚‚ æµ“åº¦é¢„æµ‹ä¸å¯è§†åŒ–ç³»ç»Ÿ</p>
                    <p><strong>å¼€å‘å›¢é˜Ÿï¼š</strong>æ°®è§æœªæ¥å›¢é˜Ÿ</p>
                </div>
            </div>
        </div>
    </div>

<script>
    let chartInstance = null;
    let bayAreaCities = [];
    const defaultCities = []; // å¯ä¿ç•™é»˜è®¤åŸå¸‚ä½œä¸ºå¤‡é€‰
    // åŸå¸‚å â†’ å›¾ç‰‡è·¯å¾„ï¼ˆç½‘ç»œURLæˆ–æœ¬åœ°é™æ€æ–‡ä»¶ï¼‰
    const cityImageMap = {
  'å¹¿å·': '/static/images/guangzhou.png',
  'æ·±åœ³': '/static/images/shenzhen.png',
  'ç æµ·': '/static/images/zhuhai.png',
  'ä½›å±±': '/static/images/foshan.png',
  'æƒ å·': '/static/images/huizhou.png',
  'ä¸œè': '/static/images/dongguan.png',
  'ä¸­å±±': '/static/images/zhongshan.png',
  'æ±Ÿé—¨': '/static/images/jiangmen.jpg',
  'è‚‡åº†': '/static/images/zhaoqing.png',
  'é¦™æ¸¯': '/static/images/hongkong.png',
  'æ¾³é—¨': '/static/images/macao.png'
};

    // åˆå§‹åŒ–åŸå¸‚åˆ—è¡¨ï¼šä»åç«¯APIè·å–ç»Ÿä¸€çš„åŸå¸‚æ˜ å°„å¹¶è¡¥å……é¢„æµ‹æ•°æ®
    async function initializeCities() {
        try {
            // 1. è·å–åŸå¸‚åˆ—è¡¨
            const citiesResponse = await fetch('/api/cities');
            if (!citiesResponse.ok) throw new Error('è·å–åŸå¸‚åˆ—è¡¨å¤±è´¥');
            const cities = await citiesResponse.json();

            // 2. ä¸ºæ¯ä¸ªåŸå¸‚è·å–NO2é¢„æµ‹æ•°æ®
            const citiesWithData = await Promise.all(cities.map(async (city) => {
                try {
                    // è·å–åŸå¸‚NO2é¢„æµ‹æ•°æ®
                    const response = await fetch(`/api/predict/no2/${city.id}`);
                    if (!response.ok) throw new Error(`è·å–${city.name}æ•°æ®å¤±è´¥`);
                    const data = await response.json();

                     
                    // ä»æ˜ å°„è¡¨å–å›¾ç‰‡
                    const normalizedName = city.name
                       .replace('å¸‚', '')           // å»æ‰â€œå¸‚â€ï¼ˆå¦‚â€œå¹¿å·å¸‚â€â†’â€œå¹¿å·â€ï¼‰
                       .replace('ç‰¹åˆ«è¡Œæ”¿åŒº', '');

                    // è½¬æ¢ä¸ºå‰ç«¯æ‰€éœ€æ ¼å¼
                    return {
                        name: city.name,
                        code: city.id,
                        image: cityImageMap[normalizedName] || getDefaultImage(), // ä½¿ç”¨é»˜è®¤å›¾ç‰‡æˆ–æ‰©å±•é€»è¾‘
                        hourlyValues: data.values || [], // é¢„æµ‹çš„æ¯å°æ—¶æµ“åº¦å€¼
                        currentValue: data.currentValue || 0,
                        updateTime: data.updateTime || ''
                    };
                } catch (error) {
                    console.error(`å¤„ç†${city.name}æ•°æ®æ—¶å‡ºé”™:`, error);
                    // å‡ºé”™æ—¶è¿”å›åŸºç¡€ä¿¡æ¯
                    return {
                        name: city.name,
                        code: city.id,
                        image: getDefaultImage(),
                        hourlyValues: [],
                        currentValue: 0
                    };
                }
            }));

            bayAreaCities = citiesWithData;
            console.log('åŸå¸‚åˆ—è¡¨åŠæ•°æ®åˆå§‹åŒ–æˆåŠŸ:', bayAreaCities);
            generateHeatmap(); // åˆå§‹åŒ–çƒ­åŠ›å›¾
        } catch (error) {
            console.error('åˆå§‹åŒ–åŸå¸‚åˆ—è¡¨å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®:', error);
            bayAreaCities = defaultCities;
            generateHeatmap();
        }
    }

    // æ˜¾ç¤ºåŸå¸‚ä¸‹æ‹‰åˆ—è¡¨
    function showCityDropdown(inputValue) {
        const dropdown = document.getElementById('cityDropdown');
        dropdown.innerHTML = '';
        const input = inputValue.trim().toLowerCase();

        // è¿‡æ»¤åŒ¹é…çš„åŸå¸‚ï¼ˆè¾“å…¥ä¸ºç©ºæ—¶æ˜¾ç¤ºæ‰€æœ‰åŸå¸‚ï¼‰
        const filtered = input ?
            bayAreaCities.filter(city => {
                const fullName = city.name.toLowerCase();
                const shortName = fullName.replace('å¸‚', '').replace('ç‰¹åˆ«è¡Œæ”¿åŒº', '');
                return fullName.includes(input) || shortName.includes(input);
            }) :
            [...bayAreaCities]; // è¾“å…¥ä¸ºç©ºæ—¶è¿”å›å…¨éƒ¨åŸå¸‚

        // ç”Ÿæˆä¸‹æ‹‰é¡¹
        filtered.forEach(city => {
            const shortName = city.name.replace('å¸‚', '').replace('ç‰¹åˆ«è¡Œæ”¿åŒº', '');
            const item = document.createElement('div');
            item.className = 'city-item';
            item.textContent = shortName;
            item.addEventListener('click', () => {
                document.getElementById('cityInput').value = shortName;
                dropdown.classList.remove('active');
            });
            dropdown.appendChild(item);
        });

        // æ˜¾ç¤ºä¸‹æ‹‰åˆ—è¡¨
        dropdown.classList.add('active');
    }

    // éšè—åŸå¸‚ä¸‹æ‹‰åˆ—è¡¨
    function hideCityDropdown() {
        document.getElementById('cityDropdown').classList.remove('active');
    }

    // éªŒè¯å¹¶æœç´¢åŸå¸‚ï¼ˆé”™è¯¯æç¤ºæ”¹ä¸ºå¼¹çª—ï¼‰
    function searchCity(cityName) {
        if (!cityName.trim()) {
            alert('è¯·è¾“å…¥åŸå¸‚åï¼');
            return;
        }

        // éªŒè¯æ˜¯å¦ä¸ºå¤§æ¹¾åŒºåŸå¸‚
        const normalizedInput = cityName.toLowerCase();
        const matchedCity = bayAreaCities.find(city => {
            const fullMatch = city.name.toLowerCase() === normalizedInput;
            const shortMatch = city.name.toLowerCase().replace('å¸‚', '').replace('ç‰¹åˆ«è¡Œæ”¿åŒº', '') === normalizedInput;
            return fullMatch || shortMatch;
        });

        if (matchedCity) {
            // è·³è½¬åˆ°å­é¡µé¢ï¼ˆæºå¸¦å®Œæ•´åŸå¸‚åï¼‰
            window.open(`city.html?city=${encodeURIComponent(matchedCity.name)}`, '_blank');
        } else {
            // å¼¹çª—æç¤ºä¸åœ¨èŒƒå›´å†…
            alert('è¯¥åŸå¸‚ä¸åœ¨å¤§æ¹¾åŒºèŒƒå›´');
            // æ¸…ç©ºè¾“å…¥æ¡†ä¾¿äºé‡æ–°è¾“å…¥
            document.getElementById('cityInput').value = '';
        }
    }

    // è·å–å½“å‰å°æ—¶çš„æ•°å€¼
    function getCurrentHourValue(city) {
        const hour = new Date().getHours(); // è·å–å½“å‰å°æ—¶(0-23)
        // ä¼˜å…ˆä»æ¯å°æ—¶é¢„æµ‹å€¼ä¸­å–å½“å‰å°æ—¶å¯¹åº”çš„æ•°æ®
        return city.hourlyValues && city.hourlyValues[hour] !== undefined 
            ? city.hourlyValues[hour] 
            : city.hourlyValues[0] || 0; // å…œåº•é€»è¾‘
    }
    
    // è·å–ä¸‹ä¸€å°æ—¶çš„æ•°å€¼
    function getNextHourValue(city) {
        const now = new Date();
        let nextHour = now.getHours() + 1;
        
        // å¦‚æœå½“å‰æ˜¯23ç‚¹ï¼Œä¸‹ä¸€å°æ—¶å°±æ˜¯0ç‚¹
        if (nextHour === 24) {
            nextHour = 0;
        }
        
        // ä¼˜å…ˆä»æ¯å°æ—¶é¢„æµ‹å€¼ä¸­å–ä¸‹ä¸€å°æ—¶å¯¹åº”çš„æ•°æ®
        return city.hourlyValues && city.hourlyValues[nextHour] !== undefined 
            ? city.hourlyValues[nextHour] 
            : city.hourlyValues[0] || 0; // å…œåº•é€»è¾‘
    }
    
    // è·å–è¶‹åŠ¿ç¬¦å·
    function getTrendSymbol(currentValue, nextValue) {
    if (nextValue > currentValue) {
        return '<span class="trend-up">â†‘</span>';
    } else if (nextValue < currentValue) {
        return '<span class="trend-down">â†“</span>';
    } else {
        // æ–°å¢ï¼šæµ“åº¦ç›¸ç­‰æ—¶æ˜¾ç¤ºâ€”ç¬¦å·
        return '<span class="trend-equal">â€”</span>';
    }
}

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
        // åˆå§‹åŒ–åŸå¸‚åˆ—è¡¨åŠæ•°æ®
        initializeCities().then(() => { // ç­‰å¾…åŸå¸‚æ•°æ®åŠ è½½å®Œæˆ
        // è·å–å¹¿å·çš„å®æ—¶æ•°æ®
        const guangzhou = bayAreaCities.find(city => city.name.includes('å¹¿å·'));
        if (guangzhou) {
            updateLeftPanel(guangzhou); // æ›´æ–°å·¦ä¾§é¢æ¿æ˜¾ç¤ºå¹¿å·æ•°æ®
        }
            
    });
        
        // åˆå§‹åŒ–æ—¶é’Ÿ
        updateClock();
        setInterval(updateClock, 1000);
        
        // æœç´¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('searchBtn').addEventListener('click', () => {
            const city = document.getElementById('cityInput').value;
            searchCity(city);
        });
        
        // è¾“å…¥æ¡†äº‹ä»¶
        const input = document.getElementById('cityInput');
        input.addEventListener('input', (e) => {
            showCityDropdown(e.target.value);
        });

        // å½“è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶æ˜¾ç¤ºä¸‹æ‹‰æ¡†
        input.addEventListener('focus', (e) => {
            showCityDropdown(e.target.value);
        });
        
        // å›è½¦æœç´¢
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchCity(input.value);
                hideCityDropdown();
            }
        });
        
        // ç‚¹å‡»å…¶ä»–åŒºåŸŸå…³é—­ä¸‹æ‹‰
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('cityDropdown');
            const input = document.getElementById('cityInput');
            if (!dropdown.contains(e.target) && !input.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });

        
    });

    // ä»¥ä¸‹ä¸ºåŸæœ‰è¾…åŠ©å‡½æ•°ï¼ˆä¿æŒä¸å˜ï¼‰
    function getDefaultImage() {
        return 'https://images.unsplash.com/photo-1501630834273-4b5604d2ee31?auto=format&w=1920';
    }

    function updateClock() {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const weekdays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
        const weekday = weekdays[now.getDay()];
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        
        document.getElementById('dateDisplay').textContent = `${year}/${month}/${day}`; 
        document.getElementById('weekdayDisplay').textContent = weekday;
        document.getElementById('timeDisplay').textContent = `${hours}:${minutes}:${seconds}`;

        // æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡çƒ­åŠ›å›¾æ•°æ®
        if (minutes === '00' && seconds === '00') {
            initializeCities(); // é‡æ–°è·å–æ•°æ®å¹¶æ›´æ–°çƒ­åŠ›å›¾
        }
    }

    // çƒ­åŠ›å›¾ç›¸å…³å‡½æ•°ï¼ˆä¿æŒä¸å˜ï¼‰
    function getLevelByValue(value) {
        if (value < 30) return 'ä¼˜è‰¯';
        if (value < 40) return 'è‰¯å¥½';
        if (value < 50) return 'ä¸­ç­‰';
        return 'è¾ƒå·®';
    }

    function getOverlayColor(value) {
        if (value < 30) return 'rgba(50, 200, 100, 0.3)';       // ä¼˜ç§€ - ç»¿è‰²
        if (value < 40) return 'rgba(100, 200, 255, 0.3)';     // è‰¯å¥½ - è“è‰²
        if (value < 50) return 'rgba(255, 200, 50, 0.4)';      // ä¸­ç­‰ - é»„è‰²
        return 'rgba(255, 100, 100, 0.5)';                     // è¾ƒå·® - çº¢è‰²
    }

function generateHeatmap() {
    const grid = document.getElementById('heatmapGrid');
    grid.innerHTML = '';
    
    bayAreaCities.forEach(city => {
        const currentValue = getCurrentHourValue(city);
        const nextValue = getNextHourValue(city);
        const trendSymbol = getTrendSymbol(currentValue, nextValue);
        const level = getLevelByValue(currentValue);
        const overlayColor = getOverlayColor(currentValue);

        // ç®€åŒ–æ¸¯æ¾³åç§°
        const displayName = city.name
            .replace('å¸‚', '')
            .replace('ç‰¹åˆ«è¡Œæ”¿åŒº', '');
        
        const cell = document.createElement('div');
        cell.className = 'city-cell';
        cell.style.background = `url('${city.image || getDefaultImage()}') no-repeat center center`;
        cell.style.backgroundSize = 'cover';
        
        cell.innerHTML = `
            <div class="city-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: ${overlayColor}; z-index: 1;"></div>
            <div class="city-name" style="z-index: 2;">${displayName}</div>
            <div class="city-value" style="z-index: 2;">${currentValue} ${trendSymbol}</div>
            <div class="city-level" style="z-index: 2;">${level}</div>
        `;
        // å•å‡»äº‹ä»¶ï¼šæ›´æ–°å·¦ä¾§é¢æ¿æ•°æ®
        cell.addEventListener('click', () => {
            // é˜²æ­¢åŒå‡»æ—¶è§¦å‘ä¸¤æ¬¡å•å‡»äº‹ä»¶
            if (!cell.classList.contains('double-clicked')) {
                updateLeftPanel(city);
            }
            cell.classList.remove('double-clicked');
        });
        
        // åŒå‡»äº‹ä»¶ï¼šè·³è½¬åˆ°å­é¡µé¢
        cell.addEventListener('dblclick', () => {
            cell.classList.add('double-clicked'); // æ ‡è®°ä¸ºåŒå‡»ï¼Œé¿å…è§¦å‘å•å‡»å¤„ç†
            window.open(`city.html?city=${encodeURIComponent(city.name)}`, '_blank');
        });
        
        grid.appendChild(cell);
    });
}

    function updateLeftPanel(city) {
    const now = new Date();
    const currentHour = now.getHours();
    const currentValue = city.hourlyValues[currentHour] || city.hourlyValues[0]|| 0;
    const level = getLevelByValue(currentValue);
    
    // ç®€åŒ–åŸå¸‚åç§°ï¼ˆå¤„ç†å¸‚/ç‰¹åˆ«è¡Œæ”¿åŒºï¼‰
    const displayName = city.name
        .replace('å¸‚', '')
        .replace('ç‰¹åˆ«è¡Œæ”¿åŒº', '');
    
    // æ›´æ–°å·¦ä¾§å†…å®¹
    document.querySelector('.city-header h2').textContent = displayName;
    // æ›´æ–°ä»ªè¡¨ç›˜å›¾è¡¨
    createGaugeChart(currentValue);
    
    // æ–°å¢ï¼šæ›´æ–°å·¦ä¾§é¢æ¿çš„èƒŒæ™¯å›¾ç‰‡
    const cardLeft = document.querySelector('.card-left');
    // ä½¿ç”¨åŸå¸‚å¯¹åº”çš„å›¾ç‰‡ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨é»˜è®¤å›¾ç‰‡
    const cityImage = city.image || getDefaultImage();
    cardLeft.style.background = `url('${cityImage}') no-repeat center center`;
    cardLeft.style.backgroundSize = 'cover';
    
     
        // ä¿æŒæ—¶é—´æ›´æ–°ï¼ˆå¤ç”¨åŸæœ‰é€»è¾‘ï¼‰
        updateClock();
    }

    // åˆ‡æ¢é¡¹ç›®ä¿¡æ¯å±•å¼€æ”¶èµ·
    function toggleProjectInfo() {
        const content = document.getElementById('projectContent');
        const arrow = document.getElementById('toggleArrow');
        
        if (content.classList.contains('expanded')) {
            // æ”¶èµ·
            content.classList.remove('expanded');
            arrow.classList.remove('expanded');
        } else {
            // å±•å¼€
            content.classList.add('expanded');
            arrow.classList.add('expanded');
        }
    }

    // åˆ›å»ºä»ªè¡¨ç›˜å›¾è¡¨
    function createGaugeChart(value) {
        const chartDom = document.getElementById('gaugeChart');
        // é”€æ¯å·²æœ‰å®ä¾‹
        if (chartInstance) {
            chartInstance.dispose();
        }
        // åˆå§‹åŒ–EChartså®ä¾‹
        chartInstance = echarts.init(chartDom);

        // äºŒæ°§åŒ–æ°®æµ“åº¦ç­‰çº§é…ç½®ï¼ˆæ‚¨çš„é¢œè‰²ä½“ç³»ï¼‰
        const levelConfig = [
            { name: 'ä¼˜', max: 40, color: 'rgba(50, 200, 100, 0.8)' },       // 0-40Î¼g/mÂ³
            { name: 'è‰¯', max: 80, color: 'rgba(255, 255, 100, 0.8)' },     // 40-80Î¼g/mÂ³
            { name: 'è½»åº¦æ±¡æŸ“', max: 120, color: 'rgba(255, 150, 50, 0.8)' }, // 80-120Î¼g/mÂ³
            { name: 'ä¸­åº¦æ±¡æŸ“', max: 240, color: 'rgba(255, 100, 100, 0.8)' } // 120-240Î¼g/mÂ³
        ];

        // ä»ªè¡¨ç›˜é…ç½®ï¼ˆåŸºäºæ‚¨æä¾›çš„ç¤ºä¾‹ä¿®æ”¹ï¼‰
        const option = {
            series: [
                {
                    type: 'gauge', // è¡¨ç›˜ç±»å‹ä¸ºgauge
                    startAngle: 180, // èµ·å§‹è§’åº¦ï¼ˆåº•éƒ¨ï¼‰
                    endAngle: 0,     // ç»“æŸè§’åº¦ï¼ˆé¡¶éƒ¨ï¼‰
                    center: ['50%', '75%'], // è¡¨ç›˜ä¸­å¿ƒä½ç½®
                    radius: '90%',   // è¡¨ç›˜åŠå¾„
                    min: 0,          // æœ€å°å€¼ï¼ˆ0Î¼g/mÂ³ï¼‰
                    max: 240,        // æœ€å¤§å€¼ï¼ˆ240Î¼g/mÂ³ï¼‰
                    splitNumber: 8,  // åˆ†å‰²æ®µæ•°ï¼ˆä¿æŒç¤ºä¾‹æ ·å¼ï¼‰
                    axisLine: {
                        lineStyle: {
                            width: 6,
                            // é¢œè‰²åˆ†æ®µï¼ˆæŒ‰æµ“åº¦æ¯”ä¾‹æ˜ å°„ï¼‰
                            color: [
                                [levelConfig[0].max / 240, levelConfig[0].color], // ä¼˜
                                [levelConfig[1].max / 240, levelConfig[1].color], // è‰¯
                                [levelConfig[2].max / 240, levelConfig[2].color], // è½»åº¦æ±¡æŸ“
                                [1, levelConfig[3].color]                          // ä¸­åº¦æ±¡æŸ“
                            ]
                        }
                    },
                    pointer: {
                        // æŒ‡é’ˆæ ·å¼ï¼ˆå¤ç”¨ç¤ºä¾‹çš„è‡ªå®šä¹‰å›¾æ ‡ï¼‰
                        icon: 'path://M12.8,0.7l12,40.1H0.7L12.8,0.7z',
                        length: '12%',
                        width: 20,
                        offsetCenter: [0, '-60%'], // æŒ‡é’ˆåç§»ï¼ˆå‘ä¸Šï¼‰
                        itemStyle: {
                            color: 'auto'
                        }
                    },
                    axisTick: {
                        length: 12,
                        lineStyle: {
                            color: 'auto',
                            width: 2
                        }
                    },
                    splitLine: {
                        length: 20,
                        lineStyle: {
                            color: 'auto',
                            width: 5
                        }
                    },
                    axisLabel: {
                        // åˆ»åº¦æ ‡ç­¾ï¼ˆæ˜¾ç¤ºç­‰çº§åç§°ï¼‰
                        color: '#fff', // é€‚é…æ·±è‰²èƒŒæ™¯
                        fontSize: 16,
                        distance: -40, // æ ‡ç­¾è·ç¦»è¡¨ç›˜ä¸­å¿ƒçš„è·ç¦»
                        rotate: 'tangential',
                    },
                    title: {
                        // è¡¨ç›˜æ ‡é¢˜
                        name: 'NOâ‚‚æµ“åº¦ (Î¼g/mÂ³)',
                        offsetCenter: [0, '-10%'],
                        fontSize: 20,
                        color: '#00f3ff' // åŒ¹é…é¡µé¢é’è‰²é£æ ¼
                    },
                    detail: {
                        // å®æ—¶æµ“åº¦å€¼æ˜¾ç¤º
                        fontSize: 17,// æ•°å€¼å­—ä½“å¤§å°
                        offsetCenter: [0, '-35%'],
                        valueAnimation: true, // æ•°å€¼åŠ¨ç”»
                        formatter: function (val) {
                            return `${val.toFixed(1)} Î¼g/mÂ³`; // å¸¦å•ä½æ˜¾ç¤º
                        },
                        color: '#00f3ff'
                    },
                    data: [
                        {
                            value: value, // å½“å‰æµ“åº¦å€¼
                            name: 'å½“å‰æµ“åº¦'
                        }
                    ]
                }
            ]
        };

        // è®¾ç½®é…ç½®å¹¶æ¸²æŸ“
        chartInstance.setOption(option);

        // çª—å£å¤§å°å˜åŒ–æ—¶é‡ç»˜
        window.addEventListener('resize', () => {
            chartInstance.resize();
        });
    }

    
</script>
</body>
</html>
